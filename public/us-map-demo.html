<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>US Map Demo (NewSignature us-map)</title>
  <style>
    :root {
      --map-bg: #f5f5f7;
      --map-border: #cccccc;
      --panel-bg: #ffffff;
      --panel-border: #dddddd;
      --accent: #005ea2;
    }

    body {
      margin: 0;
      padding: 2rem;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #0b1120;
      color: #e5e7eb;
    }

    .wrap {
      max-width: 900px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: minmax(0, 2fr) minmax(0, 1.2fr);
      gap: 1.5rem;
      align-items: flex-start;
    }

    #map {
      width: 100%;
      height: 450px;
      background: var(--map-bg);
      border-radius: 1.25rem;
      border: 1px solid var(--map-border);
      box-shadow: 0 20px 40px rgba(0,0,0,0.35);
      overflow: hidden;
    }

    .panel {
      background: radial-gradient(circle at top left, #111827, #020617);
      border-radius: 1.25rem;
      border: 1px solid rgba(148,163,184,0.4);
      padding: 1.25rem 1.5rem;
      box-shadow: 0 18px 35px rgba(15,23,42,0.8);
    }

    .panel h1 {
      font-size: 1.25rem;
      margin: 0 0 0.25rem;
    }

    .panel h2 {
      font-size: 0.95rem;
      font-weight: 500;
      color: #9ca3af;
      margin: 0 0 1.25rem;
    }

    .panel .state-name {
      font-size: 1.8rem;
      font-weight: 650;
      margin-bottom: 0.35rem;
      color: #f9fafb;
    }

    .panel .state-code {
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #6b7280;
    }

    .metrics {
      margin-top: 1rem;
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 0.75rem;
    }

    .metric {
      background: rgba(15,23,42,0.85);
      border-radius: 0.9rem;
      border: 1px solid rgba(55,65,81,0.8);
      padding: 0.6rem 0.75rem;
    }

    .metric-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: #9ca3af;
      margin-bottom: 0.25rem;
    }

    .metric-value {
      font-size: 0.95rem;
      font-weight: 600;
      color: #e5e7eb;
    }

    .hint {
      margin-top: 1.1rem;
      font-size: 0.8rem;
      color: #6b7280;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      padding: 0.25rem 0.55rem;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.7);
      background: rgba(15,23,42,0.9);
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #9ca3af;
    }

    .pill-dot {
      width: 0.45rem;
      height: 0.45rem;
      border-radius: 999px;
      background: #22c55e;
    }

    @media (max-width: 768px) {
      body {
        padding: 1.25rem;
      }
      .wrap {
        grid-template-columns: minmax(0, 1fr);
      }
      #map {
        height: 360px;
      }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div id="map"></div>

    <aside class="panel" id="state-panel">
      <h1>US Interactive Map</h1>
      <h2>Hover a state to preview • Click to lock selection</h2>

      <div class="state-name" id="state-name">No state selected</div>
      <div class="state-code" id="state-code">—</div>

      <div class="metrics">
        <div class="metric">
          <div class="metric-label">Demo Metric A</div>
          <div class="metric-value" id="metric-a">—</div>
        </div>
        <div class="metric">
          <div class="metric-label">Demo Metric B</div>
          <div class="metric-value" id="metric-b">—</div>
        </div>
      </div>

      <div class="hint">
        <span class="pill">
          <span class="pill-dot"></span>
          States go <strong>black</strong> on hover
        </span>
        <br><br>
        Wire this up to your real data by replacing the
        <code>stateData</code> object in the script at the bottom.
      </div>
    </aside>
  </div>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"
          integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
          crossorigin="anonymous"></script>

  <!-- Raphael (point this to your uploaded raphael.js) -->
  <script src="raphael.js"></script>

  <!-- NewSignature us-map plugin -->
  <script src="jquery.usmap.js"></script>

  <script>
    // Example per-state data, keyed by USPS code
    const stateData = {
      CA: { name: 'California', metricA: '12,345', metricB: 'A+' },
      TX: { name: 'Texas',      metricA: '9,876',  metricB: 'B−' },
      NY: { name: 'New York',   metricA: '7,654',  metricB: 'A'  },
      // ...add the rest of the states as needed
    };

    const nameEl     = document.getElementById('state-name');
    const codeEl     = document.getElementById('state-code');
    const metricAEl  = document.getElementById('metric-a');
    const metricBEl  = document.getElementById('metric-b');
    const panelEl    = document.getElementById('state-panel');

    function updatePanel(code, lock) {
      const data = stateData[code] || {
        name: 'Unknown state',
        metricA: '—',
        metricB: '—'
      };

      nameEl.textContent    = data.name;
      codeEl.textContent    = code || '—';
      metricAEl.textContent = data.metricA;
      metricBEl.textContent = data.metricB;

      panelEl.classList.toggle('locked', !!lock);
    }

    $(function () {
      $('#map').usmap({
        // Default styles for all states
        stateStyles: {
          fill: '#e5e7eb',
          stroke: '#ffffff',
          'stroke-width': 1
        },

        // Hover styles → make the state go black when hovered
        stateHoverStyles: {
          fill: '#000000'
        },

        // Hover animation duration (ms)
        stateHoverAnimation: 150,

        // Shows little label blocks for tiny NE states (optional)
        showLabels: true,

        // Example: override some default fills (optional)
        stateSpecificStyles: {
          CA: { fill: '#60a5fa' }, // blue-ish
          TX: { fill: '#f97316' }  // orange-ish
        },

        // When the mouse moves over a state
        mouseover: function (event, data) {
          // data.name is the 2-letter abbreviation (e.g. "CA")
          updatePanel(data.name, false);
        },

        // When the user clicks a state
        click: function (event, data) {
          updatePanel(data.name, true);

          // Example navigation (commented out):
          // window.location.href = '/states/' + data.name.toLowerCase();
        }
      });
    });
  </script>
</body>
</html>
